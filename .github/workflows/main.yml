name: Project build and tests

on:
  push:
    branches: [ master ]
  pull_request:
    types: [ opened, reopened, synchronize ]

jobs:
  Build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2

      - name: Run build of testing image
        shell: bash
        working-directory: src
        run: |
          sudo docker build -t grillbot-test-image -f ./Dockerfile
          sudo docker rmi $(docker images --format "{{.Repository}}:{{.Tag}}" | grep 'grillbot-test-image')
